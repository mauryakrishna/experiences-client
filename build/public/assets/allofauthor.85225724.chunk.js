(self.webpackChunkexperiences_client=self.webpackChunkexperiences_client||[]).push([[741],{39786:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var n,o=r(67294),i=r(38675),a=(r(45697),r(60103)),u=r(44119),l=r.n(u),c=r(42222),s=r.n(c),f=r(14265),d=r(89773),p=r(27304),h=r(40824),y=r(4784),v=r(51395),m=r(56402),b=r(36039),g=r(25976),S=r(8692),x=r(52427),A=r(22674);function w(e,t,r,o){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=o;else if(a>1){for(var u=new Array(a),l=0;l<a;l++)u[l]=arguments[l+3];t.children=u}if(t&&i)for(var c in i)void 0===t[c]&&(t[c]=i[c]);else t||(t=i||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function k(){var e,t,r=(e=["\n    mutation deleteAnExperience($input: DeleteExperienceInput) {\n      deleteAnExperience(input: $input) {\n        deleted\n        slugkey\n      }\n    }\n  "],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return k=function(){return r},r}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const Z=function(e){var t=e.slugkey,r=e.onDeleteExperienceCb,n=j((0,o.useState)(!1),2),i=n[0],a=n[1],u=l()(k()),c=j((0,A.D)(u,{update:function(e,t){var n=t.data;if(n.deleteAnExperience){var o=n.deleteAnExperience,i=o.deleted,a=o.slugkey;i&&r(a)}}}),1)[0];return o.createElement(o.Fragment,null,w(g.u,{label:"Edit"},void 0,w(g.JO,{name:"edit",onClick:function(){x.Z.push("/edit/".concat(t))}})),w(g.u,{label:"Delete"},void 0,w(g.JO,{name:"delete",onClick:function(){a(!0)}})),o.createElement(g.JN,{isOpen:i,header:"Delete an Experience",body:"Experience will be lost forever once deleted. Would you still like to delete?",cancelBtnText:"Cancel",yesBtnText:"Delete",onCancel:function(){a(!1)},onYes:function(){c({variables:{input:{slugkey:t,authoruid:s().get("username")}}}),a(!1)}}))};r(91966);var C=r(19302);function O(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(){var e,t,r=(e=["\n    mutation updateAuthor($input: UpdateAuthorInput) {\n      updateAuthor(input: $input) {\n        updated\n      }\n    }\n  "],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return I=function(){return r},r}var P;function D(e,t,r,n){P||(P="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),u=0;u<i;u++)a[u]=arguments[u+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:P,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function _(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||W(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(){var e,t,r=(e=["\n    query getAuthor($cursor: String, $experienceperpage: Int!, $uid: String!) {\n      getAuthor(\n        cursor: $cursor\n        experienceperpage: $experienceperpage\n        uid: $uid\n      ) {\n        cursor\n        author {\n          displayname\n          shortintro\n          experiences {\n            title\n            slug\n            slugkey\n            ispublished\n            experienceintrotext\n            publishdate\n            created_at\n          }\n        }\n      }\n    }\n  "],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return M=function(){return r},r}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}}(e,t)||W(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){if(e){if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var U=D(g.gb,{}),B=D(f.wp,{}),F=D(f.Vm,{}),J=D(g.M$,{},void 0,"Experiences "),q=D(d.Z,{isIndeterminate:!0,size:"24px",color:"teal"});const G=function(e){var t,r,n=e.authoruid,i=R((0,o.useState)(""),2),u=i[0],c=i[1],d=R((0,o.useState)(""),2),w=d[0],k=d[1],j=R((0,o.useState)([]),2),E=j[0],z=j[1],P=R((0,o.useState)(!0),2),W=P[0],T=P[1],G=R((0,o.useState)(null),2),H=G[0],K=G[1],L=R((0,o.useState)(!1),2),N=L[0],Q=L[1],V=R((0,o.useState)(!1),2),Y=V[0],X=V[1],ee=n===s().get("username"),te=(t=l()(I()),r=$((0,A.D)(t),1)[0],$((0,C.Z)(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.displayname,o=t.shortintro,i=t.authoruid,a=t.cb,e.next=3,r({variables:{input:{displayname:n,shortintro:o,authoruid:i}}});case 3:a(!0);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){O(i,n,o,a,u,"next",e)}function u(e){O(i,n,o,a,u,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),1),1)[0]),re=l()(M()),ne=(0,a.a)(re,{variables:{experienceperpage:10,uid:n}}),oe=ne.data,ie=ne.loading,ae=ne.fetchMore,ue=function(e){if(e&&e.getAuthor){var t=e.getAuthor.cursor,r=e.getAuthor.author,n=r.displayname,o=r.shortintro,i=r.experiences;K(t),c(n),k(o),z(i)}},le=(0,o.useRef)();(0,o.useEffect)((function(){ue(oe)}),[oe]);var ce=function(e){for(var t=E.length;t--;)if(E[t].slugkey===e){E.splice(t,1);break}z(E)};return ie?U:D(p.Z,{px:{base:"1.5rem",sm:"2rem",md:"6rem"},py:2},void 0,D(h.Z,{py:2},void 0,D(f.ZP,{fontSize:"30px",fontWeight:"300",value:"".concat(u),onChange:function(e){c(e),T(!1)}},void 0,B,F)),D(h.Z,{},void 0,D(y.Z,{isDisabled:!ee,placeholder:"A short bio about you.",inputRef:le,p:0,minHeight:"0",color:"black",fontSize:"18px",fontWeight:"400",borderWidth:"0",resize:"none",focusBorderColor:"white",as:g._R,onChange:function(e){var t=e.target.value;t.length<=S.ni?k(t):(k(t.substring(S.ni,0)),Q(!0)),T(!1)},onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},value:"".concat(w||"")})),N&&D(h.Z,{},void 0,D(v.Z,{fontWeight:"100",pt:2,fontSize:{base:"0.5rem",sm:"0.7rem",md:"0.8rem"},width:"100%",color:"gray.600"},void 0,"Maximum ".concat(S.ni," characters allowed."))),D(h.Z,{},void 0,ee&&D(g.zx,{isDisabled:W,onClick:function(){te({displayname:u,shortintro:w,authoruid:n,cb:function(e){s().set("displayname",u),T(e)}})}},void 0,"Save"),ee&&D(g.zx,{disabled:W,onClick:function(){ue(oe),T(!0)}},void 0,"Cancel")),0==E.length?o.createElement(o.Fragment,null,D(v.Z,{fontSize:{sm:"1.4rem",md:"1.8rem"},my:3,mr:1,color:"gray.600"},void 0,"All the experiences you publish or draft will appear here."),D(g.zx,{position:"relative",variant:"solid",onClick:function(){x.Z.push("".concat(S.EG))}},void 0,"Get Started")):o.createElement(o.Fragment,null,J,D(m.Z,{spacing:3},void 0,E&&E.map((function(e){var t=e.title,r=e.slugkey,i=e.slug,a=e.ispublished,u=e.publishdate,l=e.experienceintrotext,c=e.created_at;return D(h.Z,{p:2},r,D(p.Z,{cursor:"pointer",borderColor:"gray.200",borderWidth:1,borderRadius:"8px",width:"100%",_hover:{borderColor:"teal.400",bg:"teal.50"}},void 0,D(h.Z,{w:"100%"},void 0,D(h.Z,{width:"100%"},void 0,D(b.ZP,{w:"100%",onClick:function(){return function(e,t,r){x.Z.push("/".concat(e,"/").concat(t,"-").concat(r))}(n,i,r)}},void 0,D(g.Uj,{width:"100%"},void 0,t,D(g.m3,{},void 0,l),D(h.Z,{},void 0,D(g.WE,{},void 0,a?"Published on ".concat(u):"Started ".concat(c)))))),D(h.Z,{margin:"10px",align:"center",justify:"left"},void 0,ee&&o.createElement(Z,{ispublished:a,slugkey:r,onDeleteExperienceCb:ce})))))}))),D(g.zx,{onClick:function(){X(!0),ae({query:re,variables:{cursor:H,experienceperpage:10,uid:n},updateQuery:function(e,t){var r=t.fetchMoreResult;X(!1);var n=e.getAuthor.author.experiences,o=r.getAuthor.author.experiences,i=r.getAuthor.cursor,a=[].concat(_(n),_(o));return{getAuthor:{cursor:i,author:{displayname:r.getAuthor.author.displayname,shortintro:r.getAuthor.author.shortintro,experiences:a}}}}})}},void 0,Y?q:"Load more")))};var H;function K(e,t,r,n){H||(H="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var a=new Array(i),u=0;u<i;u++)a[u]=arguments[u+3];t.children=a}if(t&&o)for(var l in o)void 0===t[l]&&(t[l]=o[l]);else t||(t=o||{});return{$$typeof:H,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var L="All of author";const N=function(e,t){return{chunks:["allofauthor"],title:L,component:K(i.Z,{},void 0,K(G,{title:L,authoruid:t.authoruid}))}}}}]);